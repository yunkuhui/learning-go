# go 语言学习个人心得

本人学习 go 语言，主要按以下路线学习：

1. 通过[菜鸟教程](http://www.runoob.com/go/go-tutorial.html)入门，学习 go 语言的基础知识。将教程中所有例子的代码全部手敲一遍，并在本地运行通过，包括变量的声明和使用、条件语句使用、循环语句使用、函数定义和调用、数组指针结构体以及 map 集合的使用。对 go 语言有一定的初步了解。
2. 然后去 [go 语言中文网](http://docscn.studygolang.com/doc/)进一步加深学习 go 语言，由于中文网的文档是从官方网站的文档翻译过来的，有些翻译质量不是很好，知识结构散乱，只能看各个知识点的介绍，无法深入。此步骤学习花的时间最少。
3. 选框架。目前最热门的框架是 [beego](https://beego.me/)，有中文官网网站。beego 框架功能很多，主要按以下路线学习框架：（1）搭建项目、创建路由、读取默认配置文件、接收参数、响应输出 json；（2）使用第3方依赖库创建 pdf 文档；（3）xml、json 配置文件解析；（4）mysql 数据库配置和使用。其它功能用到时再边用边学。

********************************************************************************

## go 语言技术细节

### go 语言基础

* go 语言程序结构
  * 包声明
  * 引入包
  * 函数
  * 变量
  * 语句或表达式
  * 注释

* go 语言程序语句

  一般一行一个语句结束。如果多个语句在同一行，则需要 `;` 号隔开
  
* go 语言注释
  
  单行注释使用 `//`; 多行注释使用 `/**/`, 且不可嵌套使用
  
* go 语言标识符

  标识符用来命名变量和类型。由字母、数字或_组成，第一个字符必须不能是数字
  
* go 语言数据类型: 布尔型，数字类型和派生类型。  
  * 派生类型包括：指针类型、数组类型、结构化类型、Channel 类型、函数类型、切片类型、接口类型、Map 类型。  
  * 接口类型 `interface{}` 不包含任何方法，被其它任何类型实现，所以可以用来接收任何值。  
  
* 类型的转换和使用
  * 类型断言：x.(T)，其中 x 为 `interface{}` 类型，T 是要断言的类型
  
        var t = interface{}
        t = "hello world"
        if ok,_ == t.(string) {
          ... // t 为 string 类型，类型断言正确
        }
    
  * 类型转换：新变量 = 类型(旧变量)
    
        // int转float64
        var f float64
        f = float64(10)
        // 字符串转 float64，不适用，以下例子是错误的
        f = float64("10")
        // 正确的转换需要用到 strconv 包，以下为 string 转 float32 和 float64
        s := "3.1415926535"
        v1, err := strconv.ParseFloat(v, 32)
        v2, err := strconv.ParseFloat(v, 64)
        // int转 string，不可以使用 string(int),也不能使用 "+" 拼接，以下做法是错误的
        var str string
        str = string(10) // str 不等于 "10"
        str = "" + 10 // 错误表达式
        // 正确的转换为
        i,err:=strconv.Atoi("10")
     
* Go 语言算数运算符
  在数字运算的中，float64 和 float32 类型的数字不能求余（%）。
  
      // 以下求余是错误的
      var f1 float64
      var f2 float64
      f1 = 56.0
      f2 = 3.0
      f := f1%f2
  
* 函数类型

  函数可以绑定某个结构体的指针，限制只有该结构体的指针才能调用该函数，确保指针指向的数据是安全的。同时返回参数可以是多个。返回参数可以只写类型，也可以是 **变量 + 类型**。函数的参数可以是方法，即匿名函数。返回值可以是函数，相当于回调函数。
    
        // 一般公开函数
        func GetData() {
          ...
        }
        // 结构体中公开的函数
        type obj struct {}
        func (o *obj) GetData() {
          ...
        }
        // 函数作为参数或返回值
        var fun1 = func() {}
        var fun2 = func() {}
        func GetData(f1 fun1) (f2 fun2) {
          ...
        }
    
* 集合类型

  go语言集合只有 `map` 集合类型。map 集合默认值是 nil，只声明，不能直接使用，需要通过 `make` 方法创建或初始化后才能使用。
  
* 数组类型

  数组的调用，是调用一个新的副本，修改时不会修改原数组。
  切片的调用，是原切片中的数据，修改内容会直接修改切片的内容。切片调用 `append` 函数，返回的是新的切片，不是在原先的切片中修改。
  
  **注意：**判断数组或切片中是否包含某个元素，官方未提供相应方法。
  
* 条件语句

  go 语言官方不提供复杂语句。所以没有**三元运算符**之类的表达式。
  
* 结构体类型

  结构体中，在属性后，以可设置 tag。tag 和属性之间是映射关系，在不知道结构体成员具体名称时，可以通过 tag 来赋值，比如 json 解析。
  
* 精确计算

  go 语言精确计算，可以使用第3方类库 `github.com/shopspring/decimal`。如相加：
     
        float64 = decimal.NewFromFloat(变量1).Add(decimal.NewFromFloat(变量2)).Float64()    
  
* 实现
  
  当一个结构体中绑定的方法，包含了一个接口的所有方法，那么这个结构体就实现了这个接口。不需要额外的显示的关键字来绑定继承关系。所以任何结构体都实现了接口 `interface{}`
     
        // 定义A接口
        type A interface {
          getData()
        }
        // A1结构体实现接口A
        type A1 struct {}
        func (a A1) getData{}
     
* 继承
  将一个结构体写入到第二个结构体的方块内，不设属性名，那么第二个结构体就继承第一个结构体。可以使用第一个结构体的所有属性和方法。也可以定义同名同类型的属性和方法，覆盖被继承的属性和方法。
 
        // 定义A结构体
        type A struct {}
        // B结构体继承A结构体
        type B struct {
          A
        }
     

